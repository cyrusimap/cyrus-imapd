#!perl
use Cassandane::Tiny;

sub test_rename_tosub
    :NoAltNameSpace
{
    my ($self) = @_;

    my $imaptalk = $self->{store}->get_client();

    $imaptalk->create("INBOX.Junk", "(USE (\\Junk))");
    $self->assert_equals('ok', $imaptalk->get_last_completion_response());

    $imaptalk->create("INBOX.Trash");
    $self->assert_equals('ok', $imaptalk->get_last_completion_response());

    # can't rename to a deep folder
    $imaptalk->rename("INBOX.Junk", "INBOX.Trash.Junk");
    $self->assert_equals('no', $imaptalk->get_last_completion_response());
}
