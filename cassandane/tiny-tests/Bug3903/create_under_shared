#!perl
use Cassandane::Tiny;

sub test_create_under_shared
    :NoAltNameSpace
{
    my ($self) = @_;

    my $talk = $self->{store}->get_client();

    my $res = $talk->create('shared.Test5');
    $self->assert_null($res); # means it failed
    $self->assert_str_equals('no', $talk->get_last_completion_response());
    $self->assert($talk->get_last_error() =~ m/permission denied/i);

}
