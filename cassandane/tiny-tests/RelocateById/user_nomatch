#!perl
use Cassandane::Tiny;

sub test_user_nomatch
    :min_version_3_6
{
    my ($self) = @_;

    my $errfile = $self->{instance}->get_basedir() . '/relocate.err';

    my $user = 'nonexistent';

    $self->{instance}->run_command({
        cyrus => 1,
        redirects => {
            stderr => $errfile,
        },
    }, 'relocate_by_id', '-u', $user);

    my $output = slurp_file($errfile);

    # better complain if the user requested doesn't exist!
    $self->assert_matches(qr{$user: user not found}, $output);
}
