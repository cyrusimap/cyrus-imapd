#!perl
use Cassandane::Tiny;

sub test_bad_mailboxes
{
    my ($self) = @_;

    my $admintalk = $self->{adminstore}->get_client();

    my @bad_mailboxes = (
        '$RACL',
        '$RACL$U$anyone$user.foo',
        'domain.com!user.foo', # virtdomains=off
        #'user.cassandane..blah', # silently fixed by namespace conversion
    );

    foreach my $m (@bad_mailboxes) {
        $admintalk->create($m);
        $self->assert_str_equals('no',
            $admintalk->get_last_completion_response());
    }
}
