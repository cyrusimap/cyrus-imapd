#!perl
use Cassandane::Tiny;

#
# Test LSUB behaviour
#
sub test_list_2011
{
    my ($self) = @_;

    my $imaptalk = $self->{store}->get_client();

    my @inter_flags = qw( \\HasChildren );
    my ($maj, $min) = Cassandane::Instance->get_version();
    if ($maj < 3 || ($maj == 3 && $min < 5)) {
        unshift @inter_flags, qw( \\Noselect );
    }

    my $alldata = $imaptalk->list("", "2001");
    $self->assert_deep_equals($alldata, [
          [
            \@inter_flags,
            '/',
            '2001'
          ]
    ], "LIST data mismatch: "  . Dumper($alldata));
}
