<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Cyrus IMAP Server FAQ</title>
<!-- $Id: faq.html,v 1.19 2002/05/20 18:56:43 ken3 Exp $ -->
</head>
<body>
<h1>Cyrus IMAP Server FAQ</h1>

<ul>
<li><b>Using PAM</b> Under Linux when using PAM and shadow
passwords, /etc/shadow needs to be readable by the Cyrus user.</li>

<li><b>POP-Before-SMTP</b> It is not included in the default distribution
because there is already a standard way of doing this with SMTP AUTH.
Any good MTA and/or MUA should support SMTP AUTH, so we shouldn't have
to create a hack in an unrelated service.  However, if you would like
to install it anyway, we recommend using
<a href="http://mail.cc.umanitoba.ca/drac/">DRAC</a>,
along with the patch available in <tt>contrib/drac_auth.patch</tt>.</li>

<li><b>Using NFS</b> We don't recommend it. If you want to do it,
it may possibly work but you may also lose your email or have
corrupted <tt>cyrus.*</tt> files. You can look at the mailing list
archives for more information.</li>

<li><b>Virtual hosting</b> - We don't support it and don't plan to
support it unless we get a set of complete patches. If you want it,
you'll need to do it yourself or use a commercial product. Check
the list archives for more information.</li>

<li><b>dots in userids</b> - you can have a '.' in your username
IF, AND ONLY IF, you use the <a
href="altnamespace.html#unixhiersep">UNIX hierarchy
convention</a>.</li>

<li><b>renaming users</b> - nope, not supported.</li>

<li><b>plus addressing</b></li>

<li><b>Performance/Capacity/Scaling</b> - See <a
href="install-perf.html">the performance guide</a>.</li>
</ul>

<h2>Troubleshooting</h2>

<dl compact="compact">
<dt><b>Q:</b> I'm getting syslog'd messages from the master process
saying processes are "signaled to death by 10". What's up?</dt>

<dd>
<p><b>A:</b> If you're using Berkeley DB 3.0.55, try installing
some <a
href="http://www.sleepycat.com/update/3.0.55/patch.3.0.55.html">patches
to Berkeley DB</a> available from <a
href="http://www.sleepycat.com/update/3.0.55/patch.3.0.55.html">http://www.sleepycat.com/update/3.0.55/patch.3.0.55.html</a>.</p>
</dd>

<dt><b>Q:</b> I've used <tt>saslpasswd2</tt> to create CRAM-MD5
secrets, but imapd doesn't say <tt>AUTH=CRAM-MD5</tt>. Why?</dt>

<dd>
<p><b>A:</b> Make sure <tt>/etc/sasldb2</tt> is readable by the
Cyrus user.</p>
</dd>

<dt><b>Q:</b> I'm using "<tt>sasl_pwcheck_method: saslauthd</tt>", but
authentication isn't working.

<dd>
<p><b>A:</b> Make sure that the <tt>saslauthd</tt> daemon is running
(you'll want to start it when the system boots).  <tt>imapd</tt> is
unable to connect to <tt>saslauthd</tt> if the following message
appears in the logs:</p>

<pre>
Dec  6 12:58:57 mail3.andrew.cmu.edu imapd[1297]: cannot connect to saslauthd server
</pre>

<p>Make sure that <tt>saslauthd</tt> is running and that the cyrus
user can access the unix domain socket (defaults to <tt>/var/run/mux</tt>).

</dd>

<dt><b>Q:</b> I'm getting messages about "duplicate_prune". What's
wrong?</dt>

<dd><b>A:</b>These messages look like 

<pre>
Jan 14 13:46:24 grant ctl_deliver[9060]: duplicate_prune: opening
/var/imap/deliverdb/deliver-x.db: No such file or directory
Jan 14 13:46:24 grant ctl_deliver[9060]: duplicate_prune: opening
  /var/imap/deliverdb/deliver-y.db: No such file or directory
Jan 14 13:46:24 grant ctl_deliver[9060]: duplicate_prune: opening
  /var/imap/deliverdb/deliver-z.db: No such file or directory
</pre>

<p>These messages are normal; one file is maintained for each user
beginning with "x", "y", "z", etc. If you're first starting or you
have no users beginning with these letters, these messages are
completely normal and can be ignored.</p>
</dd>

<dt><b>Q:</b> I'm getting a message about "<tt>imapd: could not
getenv(CYRUS_SERVICE); exiting</tt>" in my <tt>imapd.log</tt>.
What's wrong?</dt>

<dd>
<p><b>A:</b> Remove all <tt>imap</tt>, <tt>pop</tt>, <tt>lmtp</tt>
and <tt>sieve</tt> lines from <tt>[x]inetd.conf</tt> and restart
<tt>[x]inetd</tt>.</p>
</dd>

<dt><b>Q:</b> How do I use different SSL/TLS certificates for imap
and pop?</dt>

<dd>
<p><b>A:</b> Specify the different certs using the appropriate
options in <tt>imapd.conf</tt>. Read <tt>imapd.conf(5)</tt> for
details.</p>
</dd>

<dt><b>Q:</b> My KPOP client is complaining about TLS keys. What
should I do?</dt>

<dd>
<p><b>A:</b> Disable TLS for the kpop service. Either set
<tt>tls_pop3_cert_file</tt> to <b>disabled</b> in
<tt>imapd.conf</tt> (which will also disable SSL/TLS for pop3), or
use a separate config file for kpop. For example, change the kpop
service in <tt>cyrus.conf</tt> to something like:</p>

<pre>
kpop    cmd="pop3d -k -C /etc/kpopd.conf" listen="kpop"
</pre>

then copy <tt>/etc/imapd.conf</tt> to <tt>/etc/kpopd.conf</tt> and
remove the <tt>tls_*</tt> options.</dd>

<dt><b>Q:</b> Eudora 5.x can't connect using STARTTLS ("SSL
Neogotiation Failed"). What should I do?</dt>

<dd>
<p><b>A:</b> First, complain to QUALCOMM because their STARTTLS
implementation is broken. Eudora doesn't support TLSv1 (per
RFC2246) and Cyrus requires it. If you really need this before it
is fixed in Eudora, remove or comment out the following lines in
tls.c:</p>

<pre>
    if (tlsonly) {
        off |= SSL_OP_NO_SSLv2;
        off |= SSL_OP_NO_SSLv3;
    }
</pre>
</dd>
</dl>

<hr />
last modified: $Date: 2002/05/20 18:56:43 $ <br />
<a href="index.html">Return</a> to the Cyrus IMAP Server Home Page
</body>
</html>

