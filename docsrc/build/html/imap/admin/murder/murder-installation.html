

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cyrus Murder: Installation and Administration &mdash; Cyrus IMAP and SASL  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/cyrus.css" type="text/css" />
  

  
    <link rel="top" title="Cyrus IMAP and SASL  documentation" href="../../../index.html"/>
        <link rel="up" title="Cyrus Murder" href="murder.html"/>
        <link rel="next" title="Cyrus Murder Mupdate Details" href="murder-mupdate-details.html"/>
        <link rel="prev" title="Cyrus Murder: Concepts" href="murder-concepts.html"/> 

  
  
  

</head>

<body class="wy-body-for-nav" role="document">

  
  
<div class="pageheader">
  <ul>
    <li><a href="../../../index.html">Home</a></li>
    <li><a href="../../installation.html">Download</a></li>
    <li><a href="../../../contribute.html">Contribute</a></li>
    <li><a href="../../../feedback.html">Support</a></li>
  </ul>
  <div>
    <a href="../../../index.html">
      <img src="../../../_static/logo.gif" alt="CYRUS" />
    </a>
  </div>
</div>
<div style="clear: both;"></div>


  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
 
          <a href="../../../index.html">
 

  
          
          <img src="../../../_static/logo.gif"  />
     
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Welcome to Cyrus</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction to Cyrus IMAP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#what-is-imap">What is IMAP?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">IMAP Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../features.html#security-and-authentication">Security and Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../features/authentication-kerberos.html">Kerberos Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/authentication-ldap.html">LDAP Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/authentication-sql.html">SQL Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/authentication-sql.html#pre-requisites">Pre-requisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/authentication-sql.html#database-structure">Database structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/authentication-sql.html#pam-configuration-for-use-with-saslauthd">PAM configuration for use with saslauthd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/authentication-sql.html#testing-the-sasl-configuration">Testing the SASL configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/authentication-sql.html#create-the-test-mailboxes-within-cyrus">Create the test mailboxes within Cyrus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/authentication-sql.html#testing-everything-together">Testing everything together</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../features/access-control.html">Access Control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/access-control.html#discretionary-access-control">Discretionary Access Control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../features/sealed-system.html">Sealed System Design</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../features.html#mailbox-management">Mailbox Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../features/automatic-creation-of-mailboxes.html">Automatic Creation of Mailboxes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/automatic-creation-of-mailboxes.html#autocreation-of-mailboxes">Autocreation of mailboxes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/automatic-creation-of-mailboxes.html#automatic-quota-settings">Automatic quota settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/automatic-creation-of-mailboxes.html#autocreation-of-sieve-scripts">Autocreation of Sieve scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/automatic-creation-of-mailboxes.html#automated-folder-subscriptions">Automated folder subscriptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/automatic-creation-of-mailboxes.html#autocreation-of-users">Autocreation of users</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../features/namespaces.html">Mailbox Namespaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/namespaces.html#namespace-convention-netnews">Namespace Convention: <strong>netnews</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/namespaces.html#namespace-convention-not-netnews">Namespace Convention: &#8220;not netnews&#8221;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/namespaces.html#alternate-namespace">Alternate Namespace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/namespaces.html#internal-namespace">Internal Namespace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/namespaces.html#administrator-namespaces">Administrator Namespaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/namespaces.html#imap-features-namespaces-personal">Personal Namespace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/namespaces.html#other-users-namespace">Other Users Namespace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/namespaces.html#shared-namespaces">Shared Namespaces</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../features/mailbox-annotations.html">Mailbox Annotations (METADATA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/mailbox-distribution.html">Mailbox Distribution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/mailbox-distribution.html#partition-selection-mode">Partition Selection Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/mailbox-distribution.html#backend-selection-mode-cyrus-imap-murder">Backend Selection Mode (Cyrus IMAP Murder)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../features.html#message-management">Message Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../features/delayed-delete.html">Delayed Delete</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/delayed-delete.html#configuring-cyrus-imap-for-delayed-delete">Configuring Cyrus IMAP for Delayed Delete</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../features/delayed-expunge.html">Delayed Expunge</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/delayed-expunge.html#configuring-cyrus-imap-for-delayed-expunge">Configuring Cyrus IMAP for Delayed Expunge</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../features/message-annotations.html">Message Annotations (METADATA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/duplicate-message-delivery-suppression.html">Duplicate Message Delivery Suppression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/shared-seen-state.html">Shared Seen State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/server-side-filtering.html">Server Side Filtering (Sieve)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/event-notifications.html">Event Notifications</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/event-notifications.html#available-event-notifications">Available Event Notifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/event-notifications.html#example-event-notifications">Example Event Notifications</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../features.html#storage">Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../features/mail-spool-partitions.html">Mail Spool Partitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/mail-spool-partitions.html#storage-tiering-with-partitions">Storage Tiering with Partitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/mail-spool-partitions.html#restricting-storage-used-with-partitions">Restricting Storage Used with Partitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../features/mailbox-metadata-partitions.html">Mailbox Metadata Partitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/quota.html">Quota</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../features/single-instance-store.html">Single-Instance Store</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../features.html#load-management">Load Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../features/server-aggregation.html">Cyrus IMAP Murder (Server Aggregation)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../features/server-aggregation.html#use-cases-for-the-cyrus-imap-murder">Use-Cases for the Cyrus IMAP Murder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../features/server-aggregation.html#cyrus-imap-murder-topologies">Cyrus IMAP Murder Topologies</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../feedback.html">Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../feedback-bugs.html">Reporting Bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../feedback-mailing-lists.html">Mailing Lists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../feedback-mailing-lists.html#archives">Archives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../feedback-mailing-lists.html#subscribe-unsubscribe">Subscribe/Unsubscribe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../feedback-mailing-lists.html#digest-lists">Digest Lists</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../feedback-irc.html">IRC Chat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../feedback-meetings.html">Online Meetings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/about_cyrus.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../overview/what_is_cyrus.html">What is Cyrus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/what_is_cyrus.html#what-is-cyrus">What is Cyrus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/what_is_cyrus.html#what-is-imap">What is IMAP?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/what_is_cyrus.html#imap-version-4-imap4">IMAP Version 4 (IMAP4)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/what_is_cyrus.html#mime">Mime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/what_is_cyrus.html#smtp">SMTP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview/who_is_cyrus.html">Who Is Cyrus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/who_is_cyrus.html#core-contributors">Core Contributors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/who_is_cyrus.html#individual-contributors-and-past-contributors">Individual contributors and past contributors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview/cyrus_roadmap.html">Cyrus Roadmap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/cyrus_roadmap.html#high-level-roadmap">High Level Roadmap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../overview/cyrus_roadmap.html#future">2.6 (Future)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../overview/cyrus_roadmap.html#id2">2.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../overview/cyrus_roadmap.html#x">2.4.x</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../overview/cyrus_roadmap.html#x-and-2-3-x">2.2.x and 2.3.x</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../overview/cyrus_roadmap.html#pre-2-2">pre 2.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview/cyrus_history.html">Cyrus History</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../overview/cyrus_bylaws.html">Cyrus Bylaws</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/cyrus_bylaws.html#i-the-cyrus-governance-board">I. The Cyrus Governance Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/cyrus_bylaws.html#ii-the-cyrus-core-developers-group">II. The Cyrus Core Developers Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/cyrus_bylaws.html#iii-the-release-engineer">III. The Release Engineer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/cyrus_bylaws.html#iv-the-cyrus-roadmap">IV. The Cyrus Roadmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/cyrus_bylaws.html#v-development-process">V. Development Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overview/cyrus_bylaws.html#vi-changes-to-the-bylaws">VI. Changes to the Bylaws</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Administrators</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">IMAP Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#installation-using-packages">Installation Using Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation/distributions/centos.html">CentOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../installation/distributions/centos.html#other-versions-of-cyrus-imap">Other Versions of Cyrus IMAP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/distributions/debian.html">Debian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/distributions/fedora.html">Fedora</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../installation/distributions/fedora.html#other-versions-of-cyrus-imap">Other Versions of Cyrus IMAP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/distributions/opensuse.html">openSUSE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/distributions/rhel.html">Red Hat Enterprise Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../installation/distributions/rhel.html#other-versions-of-cyrus-imap">Other Versions of Cyrus IMAP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/distributions/ubuntu.html">Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/obs.html">Open Build System Packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../installation/obs.html#series">2.5 Series</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../installation/obs.html#id2">2.4 Series</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#build-and-install-yourself">Build and Install Yourself</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation/diy.html">Do It Yourself</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../installation/diy.html#from-git">From GIT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../installation/diy.html#from-tarball">From Tarball</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../installation/diy.html#build-dependencies">Build Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../installation/diy.html#configure-the-build">Configure the Build</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#external-tools">External Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#licensing">Licensing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">IMAP Configuration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../deployment.html#a-guide-to-planning-a-cyrus-imap-deployment">A Guide to Planning a Cyrus IMAP Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../deployment.html#contents">Contents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/overview_and_concepts.html">Overview and Concepts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/overview_and_concepts.html#cyrus-imap">Cyrus IMAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/overview_and_concepts.html#cyrus-imap-features">Cyrus IMAP Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/overview_and_concepts.html#initial-acls-for-newly-created-mailboxes">Initial ACLs for Newly Created Mailboxes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/overview_and_concepts.html#login-authentication">Login Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/overview_and_concepts.html#quota">Quota</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/overview_and_concepts.html#html-block-that-was-commented-out-in-xml">HTML Block that was commented out in XML</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/overview_and_concepts.html#partitions">Partitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/deployment_scenarios.html">Deployment Scenarios</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/deployment_scenarios.html#single-server-deployments">Single Server Deployments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/deployment_scenarios.html#multi-server-deployments">Multi Server Deployments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/deployment_scenarios.html#id1">Cyrus IMAP Murder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/deployment_scenarios.html#the-discrete-murder">The Discrete Murder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/deployment_scenarios.html#the-unified-murder">The Unified Murder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/deployment_scenarios.html#the-shared-murder">The Shared Murder</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/deployment_scenarios.html#cyrus-replication">Cyrus Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/deployment_scenarios.html#hosted-environments">Hosted Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/deployment_scenarios.html#mailbox-creation-distribution">Mailbox Creation Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html">Mailbox Creation Distribution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#selection-mode">Selection Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#usage-convergence">Usage convergence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#computed-weight">Computed weight</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#special-cases">Special cases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#what-happens-when-two-partitions-are-equal-as-most-fitting">What happens when two partitions are equal as most fitting?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#what-happens-when-two-partitions-point-to-the-same-device">What happens when two partitions point to the same device?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#partitions-exclusion">Partitions Exclusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#partitions-usage-data-reset">Partitions Usage Data Reset</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#mailbox-creation-distribution-through-murder-frontend">Mailbox Creation Distribution Through <code class="docutils literal"><span class="pre">murder</span> <span class="pre">frontend</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#id1">Selection Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#available-selection-modes-on-frontend">Available Selection Modes on Frontend</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#backends-exclusion">Backends Exclusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/mailbox_creation_distribution.html#backends-usage-data-reset">Backends Usage Data Reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/known_protocol_limitations.html">Known Protocol Limitations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/known_protocol_limitations.html#pop3-and-mailbox-locking">POP3 and Mailbox Locking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/known_protocol_limitations.html#cyrus-imap-pop3-implementation">Cyrus IMAP POP3 Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/authentication_and_authorization.html">Authentication and Authorization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/authentication_and_authorization.html#client-authentication">Client Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/authentication_and_authorization.html#users-and-mailboxes">Users and Mailboxes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/performance_recommendations.html">Performance Recommendations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/performance_recommendations.html#databases-on-temporary-filesystems">Databases on Temporary Filesystems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/storage.html">Storage Considerations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/storage.html#general-notes-on-storage">General Notes on Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/storage.html#redundancy">Redundancy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/storage.html#availability">Availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/storage.html#performance">Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/storage.html#scalability">Scalability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/storage.html#capacity">Capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/storage.html#cost">Cost</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/supported-platforms.html">Supported Platforms and System Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/supported-platforms.html#building-cyrus-imap">Building Cyrus IMAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/supported-platforms.html#required-software-components">Required Software Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/supported-platforms.html#recommended-software-components">Recommended Software Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../deployment/supported-platforms.html#recommended-software-components-enabled-by-default">Recommended Software Components Enabled by Default</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../admin.html">IMAP Administrator Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../admin.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html">System Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/architecture.html#high-level-architecture">High Level Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/architecture.html#cyrus-murder">Cyrus Murder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/architecture.html#replication">Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/architecture.html#invoking-cyrus">Invoking Cyrus</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../admin.html#management">Management</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="murder.html">Cyrus Murder</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="murder-concepts.html">Cyrus Murder: Concepts</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="">Cyrus Murder: Installation and Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="murder-mupdate-details.html">Cyrus Murder Mupdate Details</a></li>
<li class="toctree-l4"><a class="reference internal" href="murder-failure-modes.html">Cyrus Murder Failure Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="murder-mail-delivery.html">Cyrus Murder Mail Delivery</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../access-control.html">Access Control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../access-control/combining-rights.html">Combining Access Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../access-control/defaults.html">Access Control Defaults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../access-control/rights-reference.html">Access Control Lists Rights Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../access-control.html#discretionary-access-control">Discretionary Access Control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../nntp.html">Cyrus NNTP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../nntp.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../nntp.html#nntp-setup">NNTP Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../nntp.html#defining-newsgroups">Defining Newsgroups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../nntp.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../nntp.html#further-information">Further information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../protlayer.html">Cyrus Prot Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../protlayer.html#events">Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../sieve.html">Cyrus Sieve</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../sieve.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sieve.html#installing-sieve">Installing Sieve</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sieve.html#managing-sieve-scripts">Managing Sieve Scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sieve.html#testing-the-sieve-server">Testing the sieve server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sieve.html#cyrus-sieve-support">Cyrus Sieve Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sieve.html#writing-sieve">Writing Sieve</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../sop.html">Standard Operating Procedures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../sop/replication.html">Replication: Installation and Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/mailbox-operations.html">Mailbox Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/reloading.html">Reloading Cyrus IMAP Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/altnamespace.html">Alternative Namespace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/databases.html">Database Conversion, Export and Import</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/deleting.html">Deleting and Undeleting Messages and Folders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/virtual-domains.html">Cyrus Virtual Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/administration-running.html">Running Cyrus IMAP Services on Non-Standard Ports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/reconstructing.html">Reconstructing Mailboxes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/squatter.html">Using Squatter for Faster IMAP SEARCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/splitting-metadata.html">Splitting Metadata from Partitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sop/userdeny.html">Managing user_deny.db</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../eventsource.html">Cyrus Event Source</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../eventsource.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../eventsource.html#compile-options">Compile options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../eventsource.html#configuration-options">Configuration options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../eventsource.html#event-types">Event Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../eventsource.html#accessing-events">Accessing events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../eventsource.html#apple-push-service">Apple Push Service</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../config-mailboxdistribution.html">Mailbox Distribution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../config-mailboxdistribution.html#selection-modes">Selection Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../config-mailboxdistribution.html#special-cases">Special cases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../config-mailboxdistribution.html#application">Application</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../nginx-proxy.html">HOWTO: Using an NGINX IMAP Proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tweaking.html">Tweaking Cyrus IMAP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tweaking.html#storage-tiering">Storage Tiering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tweaking.html#synchronous-file-operations">Synchronous File Operations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin.html#references">References</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../commands.html">Administrative Commands &amp; Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../commands.html#list-of-configuration-files-formats-and-settings">List of Configuration Files, Formats and Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../commands.html#list-of-system-command-line-utilities">List of System Command-line Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../commands.html#list-of-user-command-line-utilities">List of User Command-line Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../commands.html#work-in-progress">Work-in-Progress</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pycommands.html">PyCyrus Commands &amp; Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pycommands/undelete-mailbox.html"><code class="docutils literal"><span class="pre">undelete-mailbox</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../administration-tools.html">Tools &amp; Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#arbitron">arbitron</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#arbitronsort-pl">arbitronsort.pl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#chk-cyrus">chk_cyrus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#convert-sieve-pl">convert-sieve.pl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#ctl-cyrusdb">ctl_cyrusdb</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#ctl-deliver">ctl_deliver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#ctl-mboxlist">ctl_mboxlist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cvt-cyrusdb">cvt_cyrusdb</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cvt-cyrusdb-all">cvt_cyrusdb_all</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cyr-dbtool">cyr_dbtool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cyr-df">cyr_df</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cyrdump">cyrdump</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cyr-expire">cyr_expire</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#fetchnews">fetchnews</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cyr-sequence">cyr_sequence</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cyr-synclog">cyr_synclog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#cyr-userseen">cyr_userseen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#masssievec">masssievec</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#mbexamine">mbexamine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#mbpath">mbpath</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#migrate-metadata">migrate-metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#mkimap">mkimap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#mknewsgroups">mknewsgroups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#rehash">rehash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#translatesieve">translatesieve</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#undohash">undohash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../administration-tools.html#upgradesieve">upgradesieve</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../access-control/rights-reference.html">Access Control Lists Rights Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin.html#other">Other</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../packagers.html">Notes for Packagers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../packagers.html#services-in-etc-services">Services in <code class="docutils literal"><span class="pre">/etc/services</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">IMAP Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#features">Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/feature-database-backend.html">Which database backend should I use for which databases?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/feature-duplicate-delivery.html">Duplicate Delivery Suppression</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#installation-problems">Installation Problems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/install-compilationerrors.html">Compilation errors about kssl.h and krb5.h on Red Hat Linux/Fedora</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/install-detecting-berkeley.html">Problems detecting Berkley DB on Red Hat Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/install-install-help.html">Help! There must be an easier way to get all this going...</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#common-feature-requests">Common Feature Requests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/r-murder-ha.html">Does the Cyrus Murder support High Availability configurations?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/r-pop3-logging.html">Can I configure pop3d to log amount and size of messages fetched by user?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/r-publicssharedfolders.html">How can I make CyrusSieve work with public shared folders?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/r-subfolders.html">Can I have subfolders not appear under INBOX?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#common-operational-questions">Common Operational Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-acls.html">How do I view ACLs on a mailbox?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-annotations.html">What annotations are available?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-berkeleydb.html">Why does ctl_cyrusdb -r take so long with Berkeley DB?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-configdir-tempfs.html">Is it safe to put configdir/proc and configdir/lock on a tmpfs filesystem?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-db3-lockers.html">Is the &#8220;db3: x Lockers&#8221; log message harmful?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-delete-mailbox.html">Why can I not delete a mailbox as an admin user?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-deleted-expired-expunged-purged.html">When is What ... Deleted, Expired, Expunged or Purged?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../faqs/o-deleted-expired-expunged-purged.html#users-and-imap-clients-deleting-messages">Users and IMAP Clients Deleting Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../faqs/o-deleted-expired-expunged-purged.html#deleting-folders">Deleting Folders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../faqs/o-deleted-expired-expunged-purged.html#where-are-the-messages">Where are the Messages?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-deliverdb-size.html">Why is deliver.db so large?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-freezes.html">I have multiple imapd-SERVICES configured and experience occasional freezes when I try to log in!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-mailbox-doesnotexist.html">Cyrus delivers claims that the mailbox does not exist</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-mixedcase.html">Why is mail being rejected with No Mailbox found due to MiXed CaSe incoming e-mail?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-otherdatabases.html">Can I use MySQL (or another SQL database) as the primary mail store?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-pop3slow.html">Why do POP3 connections take so long, but once the connection is established all is well?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-reconstruct.html">Why does reconstruct -m not work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-sharedfilesystem-gpfs.html">Shared File Systems GPFS for high availability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-telemetry.html">How to enable telemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-toomanyprocesses.html">The process count keeps growing!</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../faqs/o-toomanyprocesses.html#reuse-count">1. Reuse count</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../faqs/o-toomanyprocesses.html#maximum-child-count">2. Maximum child count</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../faqs/o-toomanyprocesses.html#clean-up-connections-that-are-no-longer-in-use">3. Clean up connections that are no longer in use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-unable-join-environment.html">&#8220;unable to join environment&#8221; error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/o-vacation-mailfrom.html">Why does Cyrus set the MAIL FROM address of the sender of vacation responses to &#8216;&lt;&gt;&#8217;?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html#common-interoperability-problems">Common Interoperability Problems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/interop-8bit.html">Why does Cyrus reject 8-bit characters in the headers of my messages?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/interop-barenewlines.html">Why does Cyrus reject messages with &#8220;bare newlines&#8221;?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/interop-sieve-exim.html">How do I get Cyrus Sieve to play nice with Exim?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../faqs/interop-slow-delivery.html">Why does mail delivery go slow or hang sometimes?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.html">IMAP Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../release-notes/index.html#currently-stable-version">Currently Stable Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../release-notes/index.html#current-development-version">Current Development Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../release-notes/index.html#currently-supported-product-series">Currently Supported Product Series</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/index.html#series-2-5">Series 2.5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release-notes/2.5/index.html">Cyrus IMAP 2.5 Releases</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/index.html#series-2-4">Series 2.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release-notes/2.4/index.html">Cyrus IMAP 2.4 Releases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release-notes/2.4-dav/index.html">Cyrus IMAP 2.4-caldav Releases</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release-notes/index.html#all-versions-going-back-way-back-when">All Versions Going Back Way Back When</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/index.html#series-1">Series 1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release-notes/1/1.x.x.html">Cyrus IMAP 1.x Release Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/index.html#series-2-2-0-2-3">Series 2: 2.0 - 2.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release-notes/2.0/2.0.x.html">Cyrus IMAP 2.0.x Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release-notes/2.1/2.1.x.html">Cyrus IMAP 2.1.x Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release-notes/2.2/2.2.x.html">Cyrus IMAP 2.2.x Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release-notes/2.3/index.html">Cyrus IMAP 2.3 Releases</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute.html">Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute.html#contribute-financially">Contribute Financially</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute.html#website-content-contributions">Website Content Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute.html#contribute-code">Contribute Code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer.html">IMAP Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/overview.html">Overview of Cyrus development environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/overview.html#the-pre-requisites">The pre-requisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/overview.html#the-components">The components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/installguide.html">Developer Environment Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/installguide.html#cyrus">Cyrus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/installguide.html#arcanist">Arcanist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/installguide.html#setting-up-syslog">Setting up syslog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/basicserver.html">Running a basic server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#update-your-system">1. Update your system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#install-cyrus-3rd-party-dependencies">2. Install Cyrus 3rd party dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#the-cyrus-mail-user">3. The cyrus:mail user</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#setting-up-authentication-with-sasl">4. Setting up authentication with SASL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#enabling-mail-delivery-with-lmtp">5. Enabling mail delivery with LMTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#protocol-ports">6. Protocol ports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#configuring-cyrus">7. Configuring Cyrus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#launch-cyrus">8. Launch Cyrus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#optional-setting-up-ssl-certificates">Optional: Setting up SSL certificates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#sending-a-test-email">Sending a test email</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#checking-carddav">Checking carddav</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#checking-caldav">Checking caldav</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/basicserver.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/developer-testing.html">Developer Test Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/developer-testing.html#installing-cassandane">Installing Cassandane</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/developer-testing.html#rebuild-cyrus-for-testing">Rebuild Cyrus for Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/developer-testing.html#running-the-tests">Running the tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/developer-testing.html#tips-and-tricks">Tips and Tricks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/process.html">Development Process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/process.html#coding-style">Coding Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/process.html#making-changes">Making changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/process.html#useful-developer-information">Useful Developer Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/process.html#community-participation">Community Participation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html">System Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/architecture.html#high-level-architecture">High Level Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/architecture.html#cyrus-murder">Cyrus Murder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/architecture.html#replication">Replication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/architecture.html#invoking-cyrus">Invoking Cyrus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/jmap.html">JMAP support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/jmap.html#cyrus-administration">Cyrus administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/jmap.html#jmap-client">JMAP client</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/jmap.html#jmap-implementation-in-cyrus">JMAP implementation in Cyrus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/documentation.html">Contributing to documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/documentation.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/documentation.html#documentation-tools">Documentation Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/documentation.html#checking-the-files">Checking the files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/documentation.html#submitting-updates">Submitting updates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/documentation.html#special-tags">Special Tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/documentation.html#conventions-man-pages">Conventions: Man Pages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer.html#resources">Resources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/libraries.html">Developer Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/libraries.html#list-of-libraries">List of Libraries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/docker.html">Docker Images</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/docker.html#quick-notes">Quick Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/docker.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/docker.html#running-the-tests-yourself">Running the Tests Yourself</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/docker.html#getting-an-interactive-shell">Getting an Interactive Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/docker.html#functions-for-your-convenience">Functions for Your Convenience</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/docker.html#build-process-steps">Build Process Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer.html#continuous-integration">Continuous Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/pre-configure-fails.html">Error Message: Step <code class="docutils literal"><span class="pre">pre-configure</span></code> fails on (...)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/configure-fails.html">Error Message: Step <code class="docutils literal"><span class="pre">configure</span></code> fails on (...)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/make-fails.html">Error Message: Step <code class="docutils literal"><span class="pre">make</span></code> fails on (...)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/make-check-fails.html">Error Message: Step <code class="docutils literal"><span class="pre">make-check</span></code> fails on (...)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Cyrus SASL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../sasl/getting_started.html">SASL Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#sasl">SASL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#sasl-authentication-mechanisms">SASL Authentication Mechanisms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#security-layers">Security Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#channel-binding">Channel Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#realms">Realms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#protocols">Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#cyrus-sasl">Cyrus SASL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#the-glue-library">The Glue Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#auxiliary-properties">Auxiliary Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/getting_started.html#plugins">Plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../sasl/auxiliary_properties.html">SASL Auxiliary Properties</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/auxiliary_properties.html#auxiliary-properties-and-the-glue-layer">Auxiliary Properties and the Glue Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/auxiliary_properties.html#passwords-and-other-data">Passwords and other Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/auxiliary_properties.html#sasldb">sasldb</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/auxiliary_properties.html#ldapdb">ldapdb</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/auxiliary_properties.html#sql">sql</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/auxiliary_properties.html#user-canonicalization">User Canonicalization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html">SASL Authentication Mechanisms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#external">EXTERNAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#anonymous">ANONYMOUS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#plain">PLAIN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#login">LOGIN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#cram-md5">CRAM-MD5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#digest-md5">DIGEST-MD5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#scram-sha-1">SCRAM-SHA-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#gssapi">GSSAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#gs2-krb5">GS2-KRB5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#gs2-iakerb">GS2-IAKERB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#ntlm">NTLM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#srp">SRP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#pssdss">PSSDSS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#otp">OTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/authentication_mechanisms.html#non-sasl-authentication">Non-SASL Authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../sasl/pwcheck.html">SASL Pwcheck</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/pwcheck.html#auxprop">Auxprop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/pwcheck.html#auxprop-hashed">Auxprop-hashed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/pwcheck.html#saslauthd">Saslauthd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/pwcheck.html#authdaemon">Authdaemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/pwcheck.html#alwaystrue">Alwaystrue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/pwcheck.html#auto-transition">Auto Transition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../sasl/faq.html">SASL Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/faqs/authorize-vs-authenticate.html">What is the difference between an Authorization ID and a Authentication ID?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/faqs/crammd5-digestmd5.html">Why do CRAM-MD5 and DIGEST-MD5 not work with CyrusSaslauthd?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/faqs/openldap-sasl-gssapi.html">How do I configure OpenLDAP +SASL+GSSAPI?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/faqs/plaintextpasswords.html">Why does CyrusSasl store plaintext passwords in its databases?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sasl/faqs/upgrade-saslv2.html">Why am I having a problem running dbconverter-2 to upgrade from SASLv1 to SASLv2?</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Cyrus IMAP and SASL</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../admin.html">IMAP Administrator Guide</a> &raquo;</li>
      
          <li><a href="murder.html">Cyrus Murder</a> &raquo;</li>
      
    <li>Cyrus Murder: Installation and Administration</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="cyrus-murder-installation-and-administration">
<span id="murder-installation"></span><h1>Cyrus Murder: Installation and Administration<a class="headerlink" href="#cyrus-murder-installation-and-administration" title="Permalink to this headline"></a></h1>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../developer/architecture.html#architecture-murder"><span>Overall structure of a Cyrus Murder</span></a>.</p>
<p>The Cyrus Murder provides the ability to horizontally scale your Cyrus
IMAP environment across multiple servers. It is similar in nature to
various proxy solutions such as nginx or perdition with the difference
being that Murder offers a uniform namespace. Those not currently using
shared mailboxes and who don&#8217;t intend to use shared mailboxes in the
future, should probably just consider using a simple proxy solution.</p>
<p>Before beginning Cyrus Murder configuration, we strongly recommended a
thorough review of the <a class="reference internal" href="murder-concepts.html#murder-concepts"><span>Cyrus Murder Concepts</span></a>
guide.</p>
</div>
<div class="section" id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline"></a></h2>
<dl class="docutils">
<dt>Master</dt>
<dd>In this document, Master always means the MUPDATE master server.</dd>
</dl>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h2>
<p>Cyrus IMAPd must be built with the <code class="docutils literal"><span class="pre">--enable-murder</span></code> configure
option. This builds the proxyds and the associated utilities.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Those using their distribution&#8217;s packages may need to install a
separate package for aggregation support.  For example, on Debian
and derived distros, install the <code class="docutils literal"><span class="pre">cyrus-murder</span></code> package.</p>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"></a></h3>
<blockquote>
<div><ul class="simple">
<li>At least one Cyrus IMAP server instance. If there are more than
one, their namespaces <strong>must not</strong> conflict. That is, all the
mailbox names must be unique (or in different namespaces)</li>
<li>At least one machine that will become the first Frontend Server.</li>
<li>One machine to become the MUPDATE Master server. This can be the
same as one of the frontend servers.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="configuring-the-mupdate-master">
<h3>Configuring the MUPDATE Master<a class="headerlink" href="#configuring-the-mupdate-master" title="Permalink to this headline"></a></h3>
<p>The MUPDATE Master server needs to be running the mupdate service in
master mode. The MUPDATE master may be one of the cluster&#8217;s frontend
instances, in which case no slave mupdate process should be run on this
instance.</p>
<p>On the mupdate master <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/cyrus.conf.html">cyrus.conf(5)</a> must include a line
similar to the following in the SERVICES section:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mupdate       cmd=&quot;/usr/cyrus/bin/mupdate -m&quot; listen=3905 prefork=1
</pre></div>
</div>
<p>Note the <code class="docutils literal"><span class="pre">-m</span></code> option to tell mupdate that it should start in master
mode.</p>
<p>The MUPDATE Master will also need at least a skeleton
<a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> that defines the config directory, a bogus
partition-default and the <code class="docutils literal"><span class="pre">admin</span></code>s who can authenticate to the server.
Slave mupdate servers as well as the back end servers will need to be
able to authenticate as admins on the master.</p>
<p>Here is a very simple <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> for a master server:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>configdirectory: /imap/conf
partition-default: /tmp

admins: mupdateslave1 backend1
</pre></div>
</div>
<p>SASL must also be configured as needed to properly allow authentication.</p>
</div>
<div class="section" id="setting-up-the-backends-to-push-changes-to-the-mupdate-master">
<h3>Setting up the backends to push changes to the MUPDATE Master<a class="headerlink" href="#setting-up-the-backends-to-push-changes-to-the-mupdate-master" title="Permalink to this headline"></a></h3>
<p>On the backends, configuration to be a part of a murder is easy. Simply
set the <code class="docutils literal"><span class="pre">mupdate_server</span></code> option in <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> and add
an entry to <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/cyrus.conf.html">cyrus.conf(5)</a> to push the mailboxes list to
the MUPDATE Master.</p>
<p>Depending on the authentication mechanisms used, some or all of the
following settings in <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> may be required:</p>
<blockquote>
<div><ul class="simple">
<li>mupdate_username</li>
<li>mupdate_authname</li>
<li>mupdate_realm</li>
<li>mupdate_password</li>
<li>servername</li>
</ul>
</div></blockquote>
<p>Once these settings are made, any mailbox operation on the backend will
be sent to the mupdate master for confirmation and entry into the
mupdate database.</p>
<p>At least one user/group must be configured using the <code class="docutils literal"><span class="pre">proxyservers</span></code>
<a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> option. This user should not be an
administrator, as that would give anyone compromising this credential
full administrative control on all back ends.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For lmtp to work in a murder, the proxyservers entries must also
appear in the lmtp_admins entry.</p>
</div>
<p>Example of the <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> settings discussed thus far:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># How this server identifies itself within the murder
servername: mailbox.example.com
# Who&#39;s permitted to authenticate for which purposes
admins: cyrus
proxyservers: mailproxy
lmtp_admins: mailproxy
# Auth credentials for MUPDATE Master
mupdate_server: postman.example.com
mupdate_username: postman
mupdate_authname: postman
mupdate_password: &lt;secret&gt;
</pre></div>
</div>
<p>All proxy user(s) must exist within the authentication domain of both
the MUPDATE Master and the back end, as well.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not set <code class="docutils literal"><span class="pre">proxyservers</span></code> on frontends.</p>
</div>
</div>
<div class="section" id="exporting-the-database-from-the-backend">
<h3>Exporting the database from the backend<a class="headerlink" href="#exporting-the-database-from-the-backend" title="Permalink to this headline"></a></h3>
<p>The existing mailboxes database must be exported to the MUPDATE Master.
Use the <a class="reference external" href="http://www.cyrusimap.org/imap/admin/systemcommands/ctl_mboxlist.html">ctl_mboxlist(8)</a> command to do so. For the first
synchronization, change to the cyrus user, and run <code class="docutils literal"><span class="pre">ctl_mboxlist</span> <span class="pre">-m</span></code>.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">One should use <code class="docutils literal"><span class="pre">ctl_mboxlist</span> <span class="pre">-mw</span></code> (dry run) first to be sure of
understanding all the operations that this command will perform,
since it does require that all mailboxes are unique in the murder
namespace and could lead to deletions of conflicing mailboxes on
other back ends already in the murder.</p>
</div>
<p>If everything is configured properly, the mailbox database of the
current host will upload to the mupdate master. If there are problems,
the most likely cause is a misconfiguration of the authentication
settings, or <a class="reference external" href="http://www.cyrusimap.org/imap/admin/systemcommands/mupdate.html">mupdate(8)</a> might not be running on the master.
Using <a class="reference external" href="http://www.cyrusimap.org/imap/admin/usercommands/mupdatetest.html">mupdatetest(1)</a> may be helpful in this case (it
establishes an authenticated connection to the mupdate server, if it
can).</p>
<p>It is also useful to have the backends automatically resync the state
of their local mailboxes database with the master on start up. This is
configured by adding the following to the START section of
<a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/cyrus.conf.html">cyrus.conf(5)</a> on the backends:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mupdatepush   cmd=&quot;ctl_mboxlist -m&quot;
</pre></div>
</div>
<p>This will perform synchronization with the mupdate master each time the
backend restarts, bringing the mupdate database up to date with the
contents of the backend (and performing ACTIVATE and DELETES as needed
to do so).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If somehow a mailbox exists on two (or more) backend servers, each
time one of them synchronizes its database that backend server will
become authoritative. Though this should not happen during normal
operation of the murder (because of the consistancy guarantees of
the MUPDATE protocol, and the fact that mailbox operations are
denied if the mupdate master is down), it is possible when first
creating the mupdate database or when bringing a new backend server
into the murder.</p>
</div>
</div>
<div class="section" id="configuring-the-front-ends">
<h3>Configuring the front ends<a class="headerlink" href="#configuring-the-front-ends" title="Permalink to this headline"></a></h3>
<p>Configuring the front ends is a two step process. First, define
mupdate_server (and friends) as done for the backends above. However,
as the frontends only talk to the mupdate master via a slave running on
the local machine, also set up a slave on the same machine, in the
SERVICES section of <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/cyrus.conf.html">cyrus.conf(5)</a>, like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># mupdate database service - must prefork at least 1
mupdate       cmd=&quot;mupdate&quot; listen=3905 prefork=1
</pre></div>
</div>
<p>As this is a threaded service, prefork at least 1 so that the database
synchronizes at startup. Otherwise, the service will not start running
until after recieving a mupdate client connection to the slave (which
is not a recommended configuration at this point).</p>
<p>The front end SERVICES section should now look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mupdate       cmd=&quot;mupdate&quot; listen=3905 prefork=1

imap          cmd=&quot;imap&quot; listen=&quot;imap&quot; prefork=5
imaps         cmd=&quot;imap -s&quot; listen=&quot;imaps&quot; prefork=1
pop3          cmd=&quot;pop3d&quot; listen=&quot;pop3&quot; prefork=0
pop3s         cmd=&quot;pop3d -s&quot; listen=&quot;pop3s&quot; prefork=0
kpop          cmd=&quot;pop3d -k&quot; listen=&quot;kpop&quot; prefork=0
nntp          cmd=&quot;nntpd&quot; listen=&quot;nntp&quot; prefork=0
nntps         cmd=&quot;nntpd -s&quot; listen=&quot;nntps&quot; prefork=0
http          cmd=&quot;httpd&quot; listen=&quot;http&quot; prefork=0
https         cmd=&quot;httpd -s&quot; listen=&quot;https&quot; prefork=0
sieve         cmd=&quot;timsieved&quot; listen=&quot;sieve&quot; prefork=0
lmtp          cmd=&quot;lmtpd&quot; listen=&quot;/var/imap/socket/lmtp&quot; prefork=0
</pre></div>
</div>
<p>Note that timsieved does not need a proxy daemon, the managesieve
protocol deals with the murder with referrals to the backends
internally.</p>
<p>Additionally, entries in <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> are required to
indicate the proxy auth name and passwords (if using a SASL mechanism
that requires them) to the backends.</p>
<p>For example, if the backends are <code class="docutils literal"><span class="pre">mail1.andrew.cmu.edu</span></code> and
<code class="docutils literal"><span class="pre">mail2.andrew.cmu.edu</span></code> with passwords of <code class="docutils literal"><span class="pre">foo</span></code> and <code class="docutils literal"><span class="pre">bar</span></code>, and an
auth name of <code class="docutils literal"><span class="pre">mailproxy</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mail1_password: foo
mail2_password: bar
proxy_authname: mailproxy
</pre></div>
</div>
<p>For SASL mechanisms not using authnames or passwords (e.g.
KERBEROS_V4), the password options are not required. Note the use of
the same authname as configured in the proxyservers line of the
backend&#8217;s <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> above.</p>
<p>Upon starting <a class="reference external" href="http://www.cyrusimap.org/imap/admin/systemcommands/master.html">master(8)</a> on the frontend, the local
mailboxes database should automatically synchronize with the contents
of the MUPDATE master, and it&#8217;s ready to go. Clients should connect to
the frontends, and the frontends will proxy or refer as applicable to
the backend servers.</p>
</div>
<div class="section" id="additional-backend-configuration">
<h3>Additional backend configuration<a class="headerlink" href="#additional-backend-configuration" title="Permalink to this headline"></a></h3>
<p>Authentication system expecting usernames, passwords, etc, to
authenticate, will also need to specify proxy_authname (and friends) in
the backend imapd.confs. This is so the backends can authenticate to
each other to facilitate mailbox moves. (Backend machines will need to
be full admins).</p>
</div>
<div class="section" id="delivering-mail">
<h3>Delivering mail<a class="headerlink" href="#delivering-mail" title="Permalink to this headline"></a></h3>
<p>To deliver mail to a Murder, configure MTAs just as before, but instead
of connecting directly to lmtpd on a back end, they should connect to
lmtpproxyd on any front end. Remote MTAs may connect to the lmtpproxyd
running on any front end machine (listening  on a TCP socket), or
install master and lmtpproxyd on your SMTP servers to connect via Unix
domain socket.</p>
</div>
</div>
<div class="section" id="administration">
<h2>Administration<a class="headerlink" href="#administration" title="Permalink to this headline"></a></h2>
<div class="section" id="keeping-the-database-synced">
<h3>Keeping the database synced<a class="headerlink" href="#keeping-the-database-synced" title="Permalink to this headline"></a></h3>
<p>Consistency in the database is maintained by pushing the current status
of the backends to the master, and having the frontends stay up to date
with the master&#8217;s database. Since the frontends resync themselves
entirely when they startup, downtime should not be a problem.
(While they are up they should be continuously receiving database
updates, as well when they lose connection to the master, they will
try to reconnect and resync their database upon reconnection)</p>
<p>Provided that the namespace of the backend servers is kept discrete
(with no mailboxes existing on the same server), it is not a big deal
to resync the mupdate master using <code class="docutils literal"><span class="pre">ctl_mboxlist</span> <span class="pre">-m</span></code>. If two servers
do have the same mailbox, this will need to be resolved before database
consistency can be guaranteed.</p>
</div>
<div class="section" id="moving-mailboxes-between-backends">
<h3>Moving Mailboxes between backends<a class="headerlink" href="#moving-mailboxes-between-backends" title="Permalink to this headline"></a></h3>
<p>There is currently no 100% foolproof way to do this, however, if you
issue a rename command to a frontend (as you would to move a mailbox
between partitions), and replace the partition name with the name of
the new backend, it will move the mailbox to the indicated backend. You
can also use the format <code class="docutils literal"><span class="pre">backend.domain.com!partition</span></code> to move to a
specific partition (otherwise the default partition will be used).</p>
<p>In cyradm, this looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cyrus.andrew.cmu.edu&gt; rename user.bcyrus user.bcyrus mail2.andrew.cmu.edu!u2
</pre></div>
</div>
<p>Note that since seen state is stored per-user, it is possible that when
moving a shared mailbox users will have strange effects. The general
rule is that moving an INBOX will move the entire user (including all
sub-mailboxes to the INBOX, and seen state, and subscriptions, and
sieve scripts, etc). The seen state is merged with the seen state on
the new backend, so that no data is lost (seen state is also the only
part left behind on the source backend). In the case of any other
mailbox, however, only that individual mailbox is moved. If it is a
quota root, the new quota root is instantiated on the new server, but
otherwise quotas can appear to be violated, since each backend only
takes care of its own quota.</p>
<p>In general, it&#8217;s better to leave trees of mailboxes on the same server,
and not move submailboxes of inboxes between servers.</p>
</div>
<div class="section" id="adding-additional-backend-servers">
<h3>Adding additional backend servers<a class="headerlink" href="#adding-additional-backend-servers" title="Permalink to this headline"></a></h3>
<p>This is very easy to do, simply configure an empty backend server and
set its <code class="docutils literal"><span class="pre">mupdate_server</span></code> parameter to point at the mupdate master.
Then, issue mailbox creates to it as you would any other backend
server.</p>
</div>
<div class="section" id="distributing-mailboxes-between-back-ends">
<h3>Distributing Mailboxes between Back Ends<a class="headerlink" href="#distributing-mailboxes-between-back-ends" title="Permalink to this headline"></a></h3>
<p>Several options exist within <a class="reference external" href="http://www.cyrusimap.org/imap/admin/configs/imapd.conf.html">imapd.conf(5)</a> to aid in the
distribution of new users and mailboxes within a murder; across servers
and partitions.  We recommend exploring these:</p>
<blockquote>
<div><blockquote>
<div><p><code class="docutils literal"><span class="pre">partition_select_mode:</span></code> freespace-most</p>
<blockquote>
<div><p>Partition selection mode.</p>
<dl class="docutils">
<dt><em>random</em></dt>
<dd>(pseudo-)random selection</dd>
<dt><em>freespace-most</em></dt>
<dd>partition with the most free space (KiB)</dd>
<dt><em>freespace-percent-most</em></dt>
<dd>partition with the most free space (%)</dd>
<dt><em>freespace-percent-weighted</em></dt>
<dd>each partition is weighted according to its free space (%); the more free space
the partition has, the more chances it has to be selected</dd>
<dt><em>freespace-percent-weighted-delta</em></dt>
<dd><p class="first">each partition is weighted according to its difference of free space (%)
compared to the most used partition; the more the partition is lagging behind
the most used partition, the more chances it has to be selected</p>
<p>Note that actually even the most used partition has a few chances to be
selected, and those chances increase when other partitions get closer</p>
<p class="last">Allowed values: <em>random</em>, <em>freespace-most</em>, <em>freespace-percent-most</em>, <em>freespace-percent-weighted</em>, <em>freespace-percent-weighted-delta</em></p>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">partition_select_exclude:</span></code> &lt;none&gt;</p>
<blockquote>
<div>List of partitions to exclude from selection mode.</div></blockquote>
</div></blockquote>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">partition_select_usage_reinit:</span></code> 0</p>
<blockquote>
<div>For a given session, number of <strong>operations</strong> (e.g. partition selection)
for which partitions usage data are cached.</div></blockquote>
</div></blockquote>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">partition_select_soft_usage_limit:</span></code> 0</p>
<blockquote>
<div><p>Limit of partition usage (%): if a partition is over that limit, it is
automatically excluded from selection mode.</p>
<p>If all partitions are over that limit, this feature is not used anymore.</p>
</div></blockquote>
</div></blockquote>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">serverlist:</span></code> &lt;none&gt;</p>
<blockquote>
<div>Whitespace separated list of backend server names.  Used for
finding server with the most available free space for proxying
CREATE.</div></blockquote>
</div></blockquote>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">serverlist_select_mode:</span></code> freespace-most</p>
<blockquote>
<div><p>Server selection mode.</p>
<dl class="docutils">
<dt><em>random</em></dt>
<dd>(pseudo-)random selection</dd>
<dt><em>freespace-most</em></dt>
<dd>backend with the most (total) free space (KiB)</dd>
<dt><em>freespace-percent-most</em></dt>
<dd>backend whose partition has the most free space (%)</dd>
<dt><em>freespace-percent-weighted</em></dt>
<dd>same as for partition selection, comparing the free space (%) of the least used
partition of each backend</dd>
<dt><em>freespace-percent-weighted-delta</em></dt>
<dd><p class="first">same as for partition selection, comparing the free space (%) of the least used
partition of each backend.</p>
<p class="last">Allowed values: <em>random</em>, <em>freespace-most</em>, <em>freespace-percent-most</em>, <em>freespace-percent-weighted</em>, <em>freespace-percent-weighted-delta</em></p>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">serverlist_select_usage_reinit:</span></code> 0</p>
<blockquote>
<div>For a given session, number of <strong>operations</strong> (e.g. backend selection)
for which backend usage data are cached.</div></blockquote>
</div></blockquote>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">serverlist_select_soft_usage_limit:</span></code> 0</p>
<blockquote>
<div><p>Limit of backend usage (%): if a backend is over that limit, it is
automatically excluded from selection mode.</p>
<p>If all backends are over that limit, this feature is not used anymore.</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="backups">
<h3>Backups<a class="headerlink" href="#backups" title="Permalink to this headline"></a></h3>
</div>
</div>
<div class="section" id="gotchas">
<h2>Gotchas<a class="headerlink" href="#gotchas" title="Permalink to this headline"></a></h2>
<dl class="docutils">
<dt><strong>Clients dealing with a pool of frontend servers</strong></dt>
<dd>Some clients may not be terribly efficient caching connections to a
pool of imap servers, this isn&#8217;t a problem, as such, but it may
mean that you will see many more authentications than you are used
to.</dd>
<dt><strong>Kerberos issues</strong></dt>
<dd>If you are using kerberos authentication, you will want to ensure
that all your machines are keyed properly, as we have seen problems
with different clients trying to authenticate to different services
(e.g. imap.imap-pool instead of imap.pool-frontend-1), so test the
clients in use in your enviornment and be sure that they work with
whatever keying scheme you use.</dd>
<dt><strong>Clients dealing with referrals</strong></dt>
<dd>Some clients (we&#8217;ve had particular trouble with pine, though most
of these issues have now been resolved and new versions should be
OK (that is, pine &gt; 4.44), but as referrals have not been
extensively used by any IMAP server until now, referrals are very
likely to not work correctly or have surprising effects.</dd>
<dt><strong>Clients dealing with getting a NO on LSUB commands</strong></dt>
<dd>Some clients (Outlook, for example) may behave poorly if an LSUB
command returns a NO, which may be the case if the backend server
with the user&#8217;s inbox is down. We have, for example, seen this
result in the deletion of the disconnected message cache.</dd>
<dt><strong>Behavior of cyradm / some mailbox operations</strong></dt>
<dd>The behaviour of some administrative commands might be slightly
unexpected. For example, you can only issue a SETQUOTA to a
frontend server if the entire mailbox tree underneath where you are
setting the quota exists on the same backend server, otherwise you
will need to connect directly to the backend servers to perform the
needed changes. Similarly, mailboxes will be created on the same
backend server that their parent is in. In order to create them on
a different server (or to create a new top level mailbox) you will
need to connect directly to the desired backend server.</dd>
<dt><strong>Subscriptions</strong></dt>
<dd>If users want subscribe to a mailbox other than on their backend
home server, they won&#8217;t be able to, unless you set
<code class="docutils literal"><span class="pre">allowallsubscribe:</span> <span class="pre">t</span></code> in the backend imapd.confs. This
essentially lets any string be subscribed to successfully.</dd>
<dt><strong>Restarting the mupdate master</strong></dt>
<dd>Because <code class="docutils literal"><span class="pre">ctl_cyrusdb</span> <span class="pre">-r</span></code> clears reservations on mailbox, if you
restart the mupdate master (and run recovery), then this could (we
suspect, very rarely) lead to inconsistencies in the mupdate
database.</dd>
</dl>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"></a></h2>
<dl class="docutils">
<dt><strong>Mailbox operations are being denied</strong></dt>
<dd>This is an indication that the mupdate master may be down. Restart
it.</dd>
<dt><strong>Mailbox operations are not being seen by one or more frontends</strong></dt>
<dd>This indicates that the mupdate process on a slave may have died,
you may need to restart master. Alternatively, mupdate will retry
connections every 20 seconds or so for about 20 attempts if the
master does go down.</dd>
<dt><strong>A frontend&#8217;s mailboxes.db is corrupt or out of sync</strong></dt>
<dd>Restart master on the frontend, and have the mupdate process
resynch the local database. You may need to remove the local
mailboxes database if the corruption is extreme.</dd>
<dt><strong>A mailbox&#8217;s location keeps switching between two (or more) backend hosts.</strong></dt>
<dd>It probably actually exists on both hosts. Delete the mailbox from
all but one of the hosts, and run a <code class="docutils literal"><span class="pre">ctl_mboxlist</span> <span class="pre">-m</span></code> on the one
where you want it to actually live.</dd>
<dt><strong>Databases are never created on the frontends/slaves</strong></dt>
<dd>Check to ensure that the mupdate slave process is started, (is
prefork=1)</dd>
</dl>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="murder-mupdate-details.html" class="btn btn-neutral float-right" title="Cyrus Murder Mupdate Details" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="murder-concepts.html" class="btn btn-neutral" title="Cyrus Murder: Concepts" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1993-2016, The Cyrus Team.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6 using a modified <a href="https://readthedocs.org">Read the Docs</a> <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
<!--      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      }); -->
  </script>
  
 
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var _paq = _paq || [];(function(){var u=(("https:" == document.location.protocol) ? "https://noc.kolabsys.com/piwik/" : "https://noc.kolabsys.com/piwik/");_paq.push(["setSiteId", "8"]);_paq.push(["setTrackerUrl", u+"piwik.php"]);_paq.push(["trackPageView"]);_paq.push(["setIgnoreClasses", ["no-tracking","colorbox"]]);_paq.push(["enableLinkTracking"]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.type="text/javascript";g.defer=true;g.async=true;g.src=u+"piwik.js";s.parentNode.insertBefore(g,s);})();
//--><!]]>
</script>



</body>
</html>